<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str"><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVW Case Reports Analytics Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js"></script></parameter>
<parameter name="new_str"><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Zambia Child Victim & Witness Analytics Dashboard - Inter-agency collaboration system">
    <meta http-equiv="x-content-type-options" content="nosniff">
    <meta http-equiv="cache-control" content="max-age=31536000, immutable">
    <title>CVW Case Reports Analytics Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.js" integrity="sha512-SIMGYRUjwY8+gKg7nn9EItdD8LCADSDfJNutF9TPrvEo86sQmFMh6MyralfIyhADlajSxqc7G0gs7+MwWF/ogQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">    backdrop-filter: blur(10px);</parameter>
<parameter name="new_str">    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);</parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">    backdrop-filter: blur(5px);</parameter>
<parameter name="new_str">    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);</parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">    /* Ensure tap targets are at least 44px */
    button, .action-btn, .agency-btn {
        min-height: 44px;
        touch-action: manipulation;
    }
/* Prevent zoom on input focus for iOS */
input, select, textarea {
    font-size: 16px !important;
    transform-origin: left top;
}</parameter>
<parameter name="new_str">    /* Ensure tap targets are at least 44px */
button, .action-btn, .agency-btn {
min-height: 44px;
touch-action: manipulation;
user-select: none;
-webkit-user-select: none;
}
/* Prevent zoom on input focus for iOS */
input, select, textarea {
    font-size: 16px !important;
    transform-origin: left top;
    user-select: text;
    -webkit-user-select: text;
}

/* Safari scrollbar support */
.table-wrapper {
    scrollbar-width: thin;
    scrollbar-color: #667eea #f1f1f1;
}

.table-wrapper::-webkit-scrollbar {
    width: 8px;
}

.table-wrapper::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.table-wrapper::-webkit-scrollbar-thumb {
    background: #667eea;
    border-radius: 4px;
}</parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">    <form class="login-form" id="loginForm">
        <input type="text" id="username" class="login-input" placeholder="Username" required>
        <input type="password" id="password" class="login-input" placeholder="Password" required>
        <button type="submit" class="login-btn">🚀 Login</button>
    </form></parameter>
<parameter name="new_str">    <form class="login-form" id="loginForm" role="form" aria-label="Login Form">
        <label for="username" class="sr-only">Username</label>
        <input type="text" id="username" name="username" class="login-input" placeholder="Username" title="Enter your username" autocomplete="username" required aria-label="Username" aria-describedby="username-help">
<label for="password" class="sr-only">Password</label>
    <input type="password" id="password" name="password" class="login-input" placeholder="Password" title="Enter your password" autocomplete="current-password" required aria-label="Password" aria-describedby="password-help">
    
    <button type="submit" class="login-btn" title="Submit login form" aria-label="Login to dashboard">🚀 Login</button>
</form></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">        <button class="logout-btn" onclick="logout()">🚪 Logout</button></parameter>
<parameter name="new_str">        <button class="logout-btn" onclick="logout()" title="Logout from dashboard" aria-label="Logout from current session">🚪 Logout</button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <button class="agency-btn" data-agency="NPA" onclick="selectAgency('NPA')">
                <div class="agency-icon">⚖️</div>
                <div class="agency-name">National Prosecution Authority</div>
                <div class="agency-code">NPA</div>
            </button>
            <button class="agency-btn" data-agency="MOH" onclick="selectAgency('MOH')">
                <div class="agency-icon">🏥</div>
                <div class="agency-name">Ministry of Health</div>
                <div class="agency-code">MOH</div>
            </button>
            <button class="agency-btn" data-agency="ZP" onclick="selectAgency('ZP')">
                <div class="agency-icon">👮</div>
                <div class="agency-name">Zambia Police</div>
                <div class="agency-code">ZP</div>
            </button></parameter>
<parameter name="new_str">            <button class="agency-btn" data-agency="NPA" onclick="selectAgency('NPA')" title="Select National Prosecution Authority" aria-label="Select National Prosecution Authority as reporting agency">
                <div class="agency-icon" role="img" aria-label="Scales of justice">⚖️</div>
                <div class="agency-name">National Prosecution Authority</div>
                <div class="agency-code">NPA</div>
            </button>
            <button class="agency-btn" data-agency="MOH" onclick="selectAgency('MOH')" title="Select Ministry of Health" aria-label="Select Ministry of Health as reporting agency">
                <div class="agency-icon" role="img" aria-label="Hospital">🏥</div>
                <div class="agency-name">Ministry of Health</div>
                <div class="agency-code">MOH</div>
            </button>
            <button class="agency-btn" data-agency="ZP" onclick="selectAgency('ZP')" title="Select Zambia Police" aria-label="Select Zambia Police as reporting agency">
                <div class="agency-icon" role="img" aria-label="Police officer">👮</div>
                <div class="agency-name">Zambia Police</div>
                <div class="agency-code">ZP</div>
            </button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">        <button class="action-btn add-record-btn" id="addRecordBtn" onclick="openAddRecordModal()" disabled>
            ➕ Add New Record
        </button>
        <button class="action-btn" id="searchCaseBtn" style="background: linear-gradient(135deg, #17a2b8, #6f42c1);" onclick="openSearchCaseModal()" disabled>
            🔍 Search Case
        </button>
        <button class="action-btn view-dashboard-btn" id="viewDashboardBtn" onclick="showDashboardView()">
            📈 View Dashboard
        </button>
        <button class="action-btn" id="clearDataBtn" style="background: linear-gradient(135deg, #ff6b6b, #ee5a52);" onclick="clearAllData()" title="Clear all locally saved data">
            🗑️ Clear Data
        </button></parameter>
<parameter name="new_str">        <button class="action-btn add-record-btn" id="addRecordBtn" onclick="openAddRecordModal()" disabled title="Add new case record" aria-label="Add new case record" aria-describedby="add-record-help">
            <span role="img" aria-label="Plus sign">➕</span> Add New Record
        </button>
        <button class="action-btn" id="searchCaseBtn" style="background: linear-gradient(135deg, #17a2b8, #6f42c1);" onclick="openSearchCaseModal()" disabled title="Search existing cases" aria-label="Search for existing cases" aria-describedby="search-case-help">
            <span role="img" aria-label="Magnifying glass">🔍</span> Search Case
        </button>
        <button class="action-btn view-dashboard-btn" id="viewDashboardBtn" onclick="showDashboardView()" title="View analytics dashboard" aria-label="View analytics dashboard">
            <span role="img" aria-label="Chart">📈</span> View Dashboard
        </button>
        <button class="action-btn" id="clearDataBtn" style="background: linear-gradient(135deg, #ff6b6b, #ee5a52);" onclick="clearAllData()" title="Clear all locally saved data" aria-label="Clear all locally saved data">
            <span role="img" aria-label="Trash can">🗑️</span> Clear Data
        </button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <select id="districtFilter">
                    <option value="">All Districts</option>
                </select></parameter>
<parameter name="new_str">                <select id="districtFilter" title="Filter by district" aria-label="Filter cases by district">
                    <option value="">All Districts</option>
                </select></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <select id="recordTypeFilter">
                    <option value="">All Types</option>
                    <option value="Victim">Victim</option>
                    <option value="Witness">Witness</option>
                </select></parameter>
<parameter name="new_str">                <select id="recordTypeFilter" title="Filter by record type" aria-label="Filter cases by record type">
                    <option value="">All Types</option>
                    <option value="Victim">Victim</option>
                    <option value="Witness">Witness</option>
                </select></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <select id="crimeTypeFilter">
                    <option value="">All Crime Types</option>
                </select></parameter>
<parameter name="new_str">                <select id="crimeTypeFilter" title="Filter by crime type" aria-label="Filter cases by crime type">
                    <option value="">All Crime Types</option>
                </select></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <select id="genderFilter">
                    <option value="">All Genders</option>
                    <option value="MALE">Male</option>
                    <option value="FEMALE">Female</option>
                </select></parameter>
<parameter name="new_str">                <select id="genderFilter" title="Filter by gender" aria-label="Filter cases by gender">
                    <option value="">All Genders</option>
                    <option value="MALE">Male</option>
                    <option value="FEMALE">Female</option>
                </select></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <select id="servicesFilter">
                    <option value="">All Services</option>
                </select></parameter>
<parameter name="new_str">                <select id="servicesFilter" title="Filter by services rendered" aria-label="Filter cases by services rendered">
                    <option value="">All Services</option>
                </select></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <input type="date" id="dateFromFilter" class="date-input">
            </div>
            <div class="filter-group">
                <label for="dateToFilter">Date To</label>
                <input type="date" id="dateToFilter" class="date-input"></parameter>
<parameter name="new_str">                <input type="date" id="dateFromFilter" name="dateFromFilter" class="date-input" title="Filter from date" aria-label="Filter cases from this date" autocomplete="off">
            </div>
            <div class="filter-group">
                <label for="dateToFilter">Date To</label>
                <input type="date" id="dateToFilter" name="dateToFilter" class="date-input" title="Filter to date" aria-label="Filter cases up to this date" autocomplete="off"></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <button class="reset-btn" onclick="resetFilters()">🔄 Reset Filters</button></parameter>
<parameter name="new_str">                <button class="reset-btn" onclick="resetFilters()" title="Reset all filters" aria-label="Reset all filter selections">
                    <span role="img" aria-label="Refresh">🔄</span> Reset Filters
                </button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">    <form id="addRecordForm">
        <div class="form-grid">
            <div class="form-group">
                <label for="caseId">Case ID</label>
                <input type="text" id="caseId" name="caseId" placeholder="Auto-generated based on agency and record type" readonly>
                <small style="color: #666; margin-top: 5px;">Format: [AGENCY]-[CV/CW][NUMBER] (e.g., NPA-CV1, MOH-CW5, ZP-CV12)</small>
            </div>
<div class="form-group">
            <label for="recordType">Record Type *</label>
            <select id="recordType" name="recordType" required onchange="generateCaseId(); updateRelationshipLabel();">
                <option value="">Select Type</option>
                <option value="Victim">Victim</option>
                <option value="Witness">Witness</option>
            </select>
        </div></parameter>
<parameter name="new_str">    <form id="addRecordForm" role="form" aria-label="Add New Case Record Form">
<div class="form-grid">
<div class="form-group">
<label for="caseId">Case ID</label>
<input type="text" id="caseId" name="caseId" placeholder="Auto-generated based on agency and record type" readonly title="Case ID will be auto-generated" aria-label="Case ID - automatically generated" aria-describedby="caseid-help">
<small id="caseid-help" style="color: #666; margin-top: 5px;">Format: [AGENCY]-[CV/CW][NUMBER] (e.g., NPA-CV1, MOH-CW5, ZP-CV12)</small>
</div>
<div class="form-group">
            <label for="recordType">Record Type *</label>
            <select id="recordType" name="recordType" required onchange="generateCaseId(); updateRelationshipLabel();" title="Select record type" aria-label="Select record type" aria-describedby="recordtype-help">
                <option value="">Select Type</option>
                <option value="Victim">Victim</option>
                <option value="Witness">Witness</option>
            </select>
            <small id="recordtype-help" style="color: #666; margin-top: 5px;">Choose whether this is a victim or witness record</small>
        </div></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <div class="form-group">
                <label for="dateReported">Date Reported *</label>
                <input type="date" id="dateReported" name="dateReported" required>
            </div>
<div class="form-group">
            <label for="district">District *</label>
            <select id="district" name="district" required>
                <option value="">Select District</option>
                <option value="Lusaka">Lusaka</option>
                <option value="Kitwe">Kitwe</option>
                <option value="Solwezi">Solwezi</option>
                <option value="Katete">Katete</option>
                <option value="Chipata">Chipata</option>
                <option value="Mansa">Mansa</option>
            </select>
        </div></parameter>
<parameter name="new_str">            <div class="form-group">
<label for="dateReported">Date Reported *</label>
<input type="date" id="dateReported" name="dateReported" required title="Date when case was reported" aria-label="Date when case was reported" autocomplete="off">
</div>
<div class="form-group">
            <label for="district">District *</label>
            <select id="district" name="district" required title="Select district where case occurred" aria-label="Select district where case occurred">
                <option value="">Select District</option>
                <option value="Lusaka">Lusaka</option>
                <option value="Kitwe">Kitwe</option>
                <option value="Solwezi">Solwezi</option>
                <option value="Katete">Katete</option>
                <option value="Chipata">Chipata</option>
                <option value="Mansa">Mansa</option>
            </select>
        </div></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <div class="form-group">
                <label for="cvwGender">CVW Gender *</label>
                <select id="cvwGender" name="cvwGender" required>
                    <option value="">Select Gender</option>
                    <option value="MALE">Male</option>
                    <option value="FEMALE">Female</option>
                </select>
            </div>
<!-- DISABILITY RIGHT AFTER CVW GENDER -->
        <div class="form-group">
            <label for="disability">CVW Disability Status</label>
            <select id="disability" name="disability">
                <option value="NON">None</option>
                <option value="PHYSICAL">Physical</option>
                <option value="MENTAL">Mental</option>
                <option value="MENTAL+PHYSICAL">Mental + Physical</option>
            </select>
        </div></parameter>
<parameter name="new_str">            <div class="form-group">
<label for="cvwGender">CVW Gender *</label>
<select id="cvwGender" name="cvwGender" required title="Select child/victim/witness gender" aria-label="Select child victim or witness gender" autocomplete="sex">
<option value="">Select Gender</option>
<option value="MALE">Male</option>
<option value="FEMALE">Female</option>
</select>
</div>
<!-- DISABILITY RIGHT AFTER CVW GENDER -->
        <div class="form-group">
            <label for="disability">CVW Disability Status</label>
            <select id="disability" name="disability" title="Select disability status" aria-label="Select child disability status">
                <option value="NON">None</option>
                <option value="PHYSICAL">Physical</option>
                <option value="MENTAL">Mental</option>
                <option value="MENTAL+PHYSICAL">Mental + Physical</option>
            </select>
        </div></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <!-- CVW AGE WITH YEARS/MONTHS -->
            <div class="form-group">
                <label for="cvwAge">CVW Age *</label>
                <div class="age-input-container">
                    <input type="number" id="cvwAge" name="cvwAge" min="0" max="120" placeholder="Enter age" required>
                    <select id="ageUnit" name="ageUnit" required>
                        <option value="">Select Unit</option>
                        <option value="years">Years</option>
                        <option value="months">Months</option>
                    </select>
                </div>
                <small class="age-help-text">
                    💡 Select <strong>months</strong> for infants under 1 year, <strong>years</strong> for children 1+ years old
                </small>
            </div></parameter>
<parameter name="new_str">            <!-- CVW AGE WITH YEARS/MONTHS -->
            <div class="form-group">
                <label for="cvwAge">CVW Age *</label>
                <div class="age-input-container">
                    <input type="number" id="cvwAge" name="cvwAge" min="0" max="120" placeholder="Enter age" required title="Enter child age" aria-label="Enter child age" autocomplete="off">
                    <select id="ageUnit" name="ageUnit" required title="Select age unit" aria-label="Select age unit - years or months">
                        <option value="">Select Unit</option>
                        <option value="years">Years</option>
                        <option value="months">Months</option>
                    </select>
                </div>
                <small class="age-help-text" id="age-help">
                    <span role="img" aria-label="Light bulb">💡</span> Select <strong>months</strong> for infants under 1 year, <strong>years</strong> for children 1+ years old
                </small>
            </div></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <!-- SERVICES RENDERED RIGHT AFTER CVW AGE -->
            <div class="form-group">
                <label for="servicesRendered">Services Rendered</label>
                <select id="servicesRendered" name="servicesRendered">
                    <option value="">Select Services</option>
                    <option value="MEDICAL REPORT">Medical Report</option>
                    <option value="COUNSELLING">Counselling</option>
                    <option value="MEDICAL + COUNSELLING">Medical + Counselling</option>
                </select>
            </div>
<div class="form-group">
            <label for="offenderGender">Offender Gender</label>
            <select id="offenderGender" name="offenderGender">
                <option value="">Select Gender</option>
                <option value="MALE">Male</option>
                <option value="FEMALE">Female</option>
            </select>
        </div></parameter>
<parameter name="new_str">            <!-- SERVICES RENDERED RIGHT AFTER CVW AGE -->
<div class="form-group">
<label for="servicesRendered">Services Rendered</label>
<select id="servicesRendered" name="servicesRendered" title="Select services provided" aria-label="Select services provided to the child">
<option value="">Select Services</option>
<option value="MEDICAL REPORT">Medical Report</option>
<option value="COUNSELLING">Counselling</option>
<option value="MEDICAL + COUNSELLING">Medical + Counselling</option>
</select>
</div>
<div class="form-group">
            <label for="offenderGender">Offender Gender</label>
            <select id="offenderGender" name="offenderGender" title="Select offender gender" aria-label="Select offender gender" autocomplete="off">
                <option value="">Select Gender</option>
                <option value="MALE">Male</option>
                <option value="FEMALE">Female</option>
            </select>
        </div></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <!-- CRIME TYPE RIGHT AFTER OFFENDER GENDER -->
            <div class="form-group">
                <label for="crimeType">Crime Type *</label>
                <select id="crimeType" name="crimeType" required>
                    <option value="">Select Crime Type</option>
                    <option value="ASSAULT ON A CHILD">Assault on a Child</option>
                    <option value="PHYSICAL ABUSE">Physical Abuse</option>
                    <option value="SEXUAL ASSAULT">Sexual Assault</option>
                    <option value="RAPE">Rape</option>
                    <option value="CHILD NEGLECT">Child Neglect</option>
                    <option value="DEFILEMENT">Defilement</option>
                    <option value="ONLINE SEXUAL EXPLOITATION">Online Sexual Exploitation</option>
                </select>
            </div>
<div class="form-group">
            <label for="offenderAge">Offender Age</label>
            <input type="number" id="offenderAge" name="offenderAge" min="0" placeholder="Offender Age">
        </div></parameter>
<parameter name="new_str">            <!-- CRIME TYPE RIGHT AFTER OFFENDER GENDER -->
<div class="form-group">
<label for="crimeType">Crime Type *</label>
<select id="crimeType" name="crimeType" required title="Select type of crime" aria-label="Select type of crime committed">
<option value="">Select Crime Type</option>
<option value="ASSAULT ON A CHILD">Assault on a Child</option>
<option value="PHYSICAL ABUSE">Physical Abuse</option>
<option value="SEXUAL ASSAULT">Sexual Assault</option>
<option value="RAPE">Rape</option>
<option value="CHILD NEGLECT">Child Neglect</option>
<option value="DEFILEMENT">Defilement</option>
<option value="ONLINE SEXUAL EXPLOITATION">Online Sexual Exploitation</option>
</select>
</div>
<div class="form-group">
            <label for="offenderAge">Offender Age</label>
            <input type="number" id="offenderAge" name="offenderAge" min="0" placeholder="Offender Age" title="Enter offender age" aria-label="Enter offender age" autocomplete="off">
        </div></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <!-- DYNAMIC RELATIONSHIP FIELD RIGHT AFTER OFFENDER AGE -->
            <div class="form-group">
                <label for="relationshipToCv" id="relationshipLabel">Relationship to Child</label>
                <select id="relationshipToCv" name="relationshipToCv">
                    <option value="">Select Relationship</option>
                    <option value="STRANGER">Stranger</option>
                    <option value="FRIEND">Friend</option>
                    <option value="FATHER">Father</option>
                    <option value="MOTHER">Mother</option>
                    <option value="LANDLORD">Landlord</option>
                    <option value="NEIGHBOR">Neighbor</option>
                    <option value="RELATIVE">Relative</option>
                    <option value="TEACHER">Teacher</option>
                    <option value="CAREGIVER">Caregiver</option>
                </select>
            </div></parameter>
<parameter name="new_str">            <!-- DYNAMIC RELATIONSHIP FIELD RIGHT AFTER OFFENDER AGE -->
            <div class="form-group">
                <label for="relationshipToCv" id="relationshipLabel">Relationship to Child</label>
                <select id="relationshipToCv" name="relationshipToCv" title="Select relationship to child" aria-label="Select offender relationship to child">
                    <option value="">Select Relationship</option>
                    <option value="STRANGER">Stranger</option>
                    <option value="FRIEND">Friend</option>
                    <option value="FATHER">Father</option>
                    <option value="MOTHER">Mother</option
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <!-- DYNAMIC RELATIONSHIP FIELD RIGHT AFTER OFFENDER AGE -->
            <div class="form-group">
                <label for="relationshipToCv" id="relationshipLabel">Relationship to Child</label>
                <select id="relationshipToCv" name="relationshipToCv" title="Select relationship to child" aria-label="Select offender relationship to child">
                    <option value="">Select Relationship</option>
                    <option value="STRANGER">Stranger</option>
                    <option value="FRIEND">Friend</option>
                    <option value="FATHER">Father</option>
                    <option value="MOTHER">Mother</option></parameter>
<parameter name="new_str">            <!-- DYNAMIC RELATIONSHIP FIELD RIGHT AFTER OFFENDER AGE -->
            <div class="form-group">
                <label for="relationshipToCv" id="relationshipLabel">Relationship to Child</label>
                <select id="relationshipToCv" name="relationshipToCv" title="Select relationship to child" aria-label="Select offender relationship to child">
                    <option value="">Select Relationship</option>
                    <option value="STRANGER">Stranger</option>
                    <option value="FRIEND">Friend</option>
                    <option value="FATHER">Father</option>
                    <option value="MOTHER">Mother</option>
                    <option value="LANDLORD">Landlord</option>
                    <option value="NEIGHBOR">Neighbor</option>
                    <option value="RELATIVE">Relative</option>
                    <option value="TEACHER">Teacher</option>
                    <option value="CAREGIVER">Caregiver</option>
                </select>
            </div></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">        <div class="form-actions">
            <button type="button" class="cancel-btn" onclick="closeAddRecordModal()">Cancel</button>
            <button type="submit" class="submit-btn">Add Record</button>
        </div></parameter>
<parameter name="new_str">        <div class="form-actions">
            <button type="button" class="cancel-btn" onclick="closeAddRecordModal()" title="Cancel and close form" aria-label="Cancel form and close modal">Cancel</button>
            <button type="submit" class="submit-btn" title="Submit case record" aria-label="Submit new case record">Add Record</button>
        </div></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <span class="close" onclick="closeSearchCaseModal()">&times;</span></parameter>
<parameter name="new_str">            <button class="close" onclick="closeSearchCaseModal()" title="Close search modal" aria-label="Close search case modal" style="background: none; border: none; cursor: pointer;">&times;</button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <span class="close" onclick="closeAddRecordModal()">&times;</span></parameter>
<parameter name="new_str">            <button class="close" onclick="closeAddRecordModal()" title="Close add record modal" aria-label="Close add record modal" style="background: none; border: none; cursor: pointer;">&times;</button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <input type="text" id="searchCaseId" placeholder="e.g., NPA-CV1, MOH-CW5, ZP-CV12" style="flex: 1; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 16px;">
                <button onclick="searchCase()" style="padding: 12px 20px; background: linear-gradient(135deg, #17a2b8, #6f42c1); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">🔍 Search</button></parameter>
<parameter name="new_str">                <input type="text" id="searchCaseId" name="searchCaseId" placeholder="e.g., NPA-CV1, MOH-CW5, ZP-CV12" title="Enter case ID to search" aria-label="Enter case ID to search" autocomplete="off" style="flex: 1; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 16px;">
                <button onclick="searchCase()" title="Search for case" aria-label="Search for case by ID" style="padding: 12px 20px; background: linear-gradient(135deg, #17a2b8, #6f42c1); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                    <span role="img" aria-label="Magnifying glass">🔍</span> Search
                </button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <input type="text" id="foundCaseId" readonly style="background: #f8f9fa; border: 1px solid #dee2e6; padding: 12px; border-radius: 8px;"></parameter>
<parameter name="new_str">                <input type="text" id="foundCaseId" name="foundCaseId" readonly title="Case ID" aria-label="Found case ID" style="background: #f8f9fa; border: 1px solid #dee2e6; padding: 12px; border-radius: 8px;"></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <input type="text" id="foundReportingAgency" readonly style="background: #f8f9fa; border: 1px solid #dee2e6; padding: 12px; border-radius: 8px;"></parameter>
<parameter name="new_str">                <input type="text" id="foundReportingAgency" name="foundReportingAgency" readonly title="Reporting agency" aria-label="Reporting agency" style="background: #f8f9fa; border: 1px solid #dee2e6; padding: 12px; border-radius: 8px;"></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <textarea id="foundServicesRendered" readonly style="background: #f8f9fa; border: 1px solid #dee2e6; padding: 12px; border-radius: 8px; min-height: 100px; resize: vertical;"></textarea></parameter>
<parameter name="new_str">                <textarea id="foundServicesRendered" name="foundServicesRendered" readonly title="Services rendered by all agencies" aria-label="Services rendered by all agencies" style="background: #f8f9fa; border: 1px solid #dee2e6; padding: 12px; border-radius: 8px; min-height: 100px; resize: vertical;"></textarea></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                    <select id="additionalService" style="padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 16px;">
                        <option value="">Select Service</option>
                        <option value="MEDICAL REPORT">Medical Report</option>
                        <option value="COUNSELLING">Counselling</option>
                        <option value="MEDICAL + COUNSELLING">Medical + Counselling</option>
                        <option value="LEGAL SUPPORT">Legal Support</option>
                        <option value="PSYCHOSOCIAL SUPPORT">Psychosocial Support</option>
                        <option value="SAFE HOUSE PLACEMENT">Safe House Placement</option>
                        <option value="FAMILY MEDIATION">Family Mediation</option>
                        <option value="COURT PREPARATION">Court Preparation</option>
                        <option value="FOLLOW-UP VISIT">Follow-up Visit</option>
                        <option value="CHILD PROTECTION SERVICES">Child Protection Services</option>
                        <option value="EMERGENCY ACCOMMODATION">Emergency Accommodation</option>
                        <option value="EDUCATIONAL SUPPORT">Educational Support</option>
                    </select></parameter>
<parameter name="new_str">                    <select id="additionalService" name="additionalService" title="Select additional service provided" aria-label="Select additional service provided by your agency" style="padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 16px;">
                        <option value="">Select Service</option>
                        <option value="MEDICAL REPORT">Medical Report</option>
                        <option value="COUNSELLING">Counselling</option>
                        <option value="MEDICAL + COUNSELLING">Medical + Counselling</option>
                        <option value="LEGAL SUPPORT">Legal Support</option>
                        <option value="PSYCHOSOCIAL SUPPORT">Psychosocial Support</option>
                        <option value="SAFE HOUSE PLACEMENT">Safe House Placement</option>
                        <option value="FAMILY MEDIATION">Family Mediation</option>
                        <option value="COURT PREPARATION">Court Preparation</option>
                        <option value="FOLLOW-UP VISIT">Follow-up Visit</option>
                        <option value="CHILD PROTECTION SERVICES">Child Protection Services</option>
                        <option value="EMERGENCY ACCOMMODATION">Emergency Accommodation</option>
                        <option value="EDUCATIONAL SUPPORT">Educational Support</option>
                    </select></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                    <input type="date" id="serviceDate" style="padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 16px;"></parameter>
<parameter name="new_str">                    <input type="date" id="serviceDate" name="serviceDate" title="Date service was provided" aria-label="Date service was provided" autocomplete="off" style="padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: 16px;"></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">                <textarea id="serviceNotes" placeholder="Additional details about the service provided..." style="padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; min-height: 80px; resize: vertical; font-size: 16px;"></textarea></parameter>
<parameter name="new_str">                <textarea id="serviceNotes" name="serviceNotes" placeholder="Additional details about the service provided..." title="Optional notes about the service" aria-label="Optional notes about the service provided" style="padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; min-height: 80px; resize: vertical; font-size: 16px;"></textarea></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">            <button onclick="addServiceToCase()" style="padding: 15px 30px; background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 16px; margin-top: 15px; display: flex; align-items: center; gap: 8px; min-height: 50px;">
                ✅ Add Service to Case
            </button></parameter>
<parameter name="new_str">            <button onclick="addServiceToCase()" title="Add service to this case" aria-label="Add selected service to this case record" style="padding: 15px 30px; background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 16px; margin-top: 15px; display: flex; align-items: center; gap: 8px; min-height: 50px;">
                <span role="img" aria-label="Check mark">✅</span> Add Service to Case
            </button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">        <button type="button" class="cancel-btn" onclick="closeSearchCaseModal()">Close</button></parameter>
<parameter name="new_str">        <button type="button" class="cancel-btn" onclick="closeSearchCaseModal()" title="Close search modal" aria-label="Close search case modal">Close</button></parameter>
</invoke>
</artifacts>
<artifacts>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">cvw_dashboard_complete_final</parameter>
<parameter name="old_str">        }
        if (confirm('⚠️ Are you sure you want to clear ALL data? This cannot be undone!')) {</parameter>
<parameter name="new_str">        }
// Add screen reader only class for accessibility
    const style = document.createElement('style');
    style.textContent = `
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    `;
    document.head.appendChild(style);
    
    if (confirm('⚠️ Are you sure you want to clear ALL data? This cannot be undone!')) {</parameter>
</invoke>
</artifacts>



